<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>拖动测试</title>
    <link rel="stylesheet" href="./css/swiper.css">
    <script src="./js/swiper.js"></script>
    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/vue.js"></script>
</head>
<style>
*{margin: 0;padding: 0;}
body,html{width: 100%;height: 100%;background: #eee;position: relative;}

.box{
    width: 100%;
    height: 100px;
    overflow: hidden;
}
.list_box{
    overflow: hidden;
    height: 100%;
    position: relative;
    
}
.list_box_anim{
    transition: all 0.3s;
}
.con{
    background: #fff;
    height: 100%;
    float: left;
}
.shanchu{
    height: 100%;
    width: 200px;
    float: left;
    background: red;
    color: #fff;
}

</style>
<body>
    
    <!-- <div id="box">
        <div class="con"></div>
        <div class="shanchu">删除</div>
    </div> -->

    <div class="box">
        <div class="list_box">
            <div class="con">
                沙拉的骄傲了的骄傲手榴弹
            </div>
            <div class="shanchu">删除</div>
        </div>
    </div>

<script>
    
    $(function(){
        $(".con").css("width",window.screen.width)
        $(".list_box").css("width",window.screen.width+200)
        var this_pagex = null;
        var pagex = null;

        $(".list_box").on("touchstart",function(e){
            this_pagex = 0;
            pagex = 0;
            $(".list_box").removeClass("list_box_anim")
                var positionDiv = $(this).offset();
                // 鼠标位置
                pagex = e.originalEvent.targetTouches[0].pageX-positionDiv.left
                // var pagey = e.originalEvent.targetTouches[0].pageY-positionDiv.top
           $(".list_box").on("touchmove",function(e){
            
                this_pagex = e.originalEvent.targetTouches[0].pageX
                // console.log(this_pagex-pagex)
                if(this_pagex-pagex<=-200){
                    $(".list_box").css("left",-200+"px")
                    return;
                }
                if(this_pagex-pagex>=0){
                    $(".list_box").css("left",0+"px")
                    return;
                }
                $(".list_box").css("left",(this_pagex-pagex)+"px")


           })
           
           $(".list_box").on("touchend",function(e){
                    console.log(this_pagex-pagex)
                    if(this_pagex-pagex<=-60){
                        $(".list_box").addClass("list_box_anim")
                        $(".list_box").css("left",-200+"px")
                    }else if(this_pagex-pagex<0){
                        $(".list_box").addClass("list_box_anim")
                        $(".list_box").css("left",0+"px")
                    }

                    if(this_pagex-pagex>=60){
                        $(".list_box").addClass("list_box_anim")
                        $(".list_box").css("left",0+"px")
                    }else if(this_pagex-pagex>0){
                        $(".list_box").addClass("list_box_anim")
                        $(".list_box").css("left",-200+"px")
                    }
                    pagex = 0;
                    this_pagex = 0;
            })
           
        })



    })

</script>
</body>
</html>